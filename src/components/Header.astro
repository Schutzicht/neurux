---
import EyeLogo from './EyeLogo';
---

<header id="main-header" class="fixed top-6 left-1/2 transform -translate-x-1/2 z-50 w-[90%] max-w-5xl transition-all duration-500 ease-in-out">
  <div class="header-container relative bg-white/5 backdrop-blur-xl border border-white/10 rounded-full px-6 py-4 shadow-[0_0_20px_rgba(0,0,0,0.5)] flex justify-between items-center transition-all duration-500 hover:border-white/20 hover:shadow-[0_0_30px_rgba(57,255,20,0.1)]">
    
    {/* Glowing Line at bottom */}
    <div class="absolute bottom-0 left-10 right-10 h-[1px] bg-gradient-to-r from-transparent via-[#29D9FF]/50 to-transparent opacity-50"></div>

    {/* Logo Area */}
    <a href="#" class="text-3xl font-bold tracking-tighter text-white group flex items-center gap-3 relative z-10">
      {/* Interactive Eye Logo */}
      <EyeLogo client:load />
      <span class="text-transparent bg-clip-text bg-gradient-to-r from-white to-gray-400 group-hover:to-white transition-all">neur<span class="text-[#29D9FF]">UX</span></span>
    </a>

    {/* Desktop Navigation */}
    <nav class="hidden md:flex items-center gap-1">
      <a href="#about" class="px-5 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-300 relative group overflow-hidden">
        <span class="relative z-10">Over Ons</span>
        <div class="absolute inset-0 bg-[#29D9FF]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300 rounded-full"></div>
      </a>
      <a href="#services" class="px-5 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-300 relative group overflow-hidden">
        <span class="relative z-10">Diensten</span>
        <div class="absolute inset-0 bg-[#29D9FF]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300 rounded-full"></div>
      </a>
      <a href="#cases" class="px-5 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-300 relative group overflow-hidden">
        <span class="relative z-10">Cases</span>
        <div class="absolute inset-0 bg-[#29D9FF]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300 rounded-full"></div>
      </a>
      <a href="#contact-form" class="px-5 py-2 text-sm text-gray-300 hover:text-white hover:bg-white/5 rounded-full transition-all duration-300 relative group overflow-hidden">
        <span class="relative z-10">Contact</span>
        <div class="absolute inset-0 bg-[#29D9FF]/10 translate-y-full group-hover:translate-y-0 transition-transform duration-300 rounded-full"></div>
      </a>
    </nav>

    {/* CTA Button */}
    <a href="#contact-form" class="hidden md:flex items-center gap-2 group relative px-6 py-2.5 bg-[#29D9FF] text-black text-sm font-bold rounded-full overflow-hidden transition-transform hover:scale-105 shadow-[0_0_20px_rgba(57,255,20,0.4)]">
        <span class="relative z-10 transition-transform duration-300">Start Project</span>
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 relative z-10 transform group-hover:translate-x-1 transition-transform duration-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3" />
        </svg>
        <div class="absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300"></div>
    </a>
    
    {/* Mobile Menu Button - Simple Hamburger */}
    <button id="mobile-menu-btn" class="md:hidden w-10 h-10 flex flex-col justify-center items-center gap-1.5 group z-50 relative">
        <div class="w-6 h-0.5 bg-white group-hover:bg-[#29D9FF] transition-colors rounded-full"></div>
        <div class="w-6 h-0.5 bg-white group-hover:bg-[#29D9FF] transition-colors rounded-full"></div>
        <div class="w-6 h-0.5 bg-white group-hover:bg-[#29D9FF] transition-colors rounded-full"></div>
    </button>
  </div>
</header>

{/* Mobile Menu Overlay - Moved outside header for better z-index handling */}
<div id="mobile-menu-overlay" class="fixed inset-0 bg-black/95 backdrop-blur-3xl z-[60] transform translate-x-full transition-transform duration-500 flex flex-col items-center justify-center">
  {/* Close Button on Mobile Overlay */}
  <button id="mobile-menu-close" class="absolute top-8 right-8 text-white hover:text-[#29D9FF] transition-colors">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
  </button>

  <nav class="flex flex-col items-center gap-8">
    <a href="#about" class="text-3xl text-white font-bold hover:text-[#29D9FF] transition-colors mobile-link">Over Ons</a>
    <a href="#services" class="text-3xl text-white font-bold hover:text-[#29D9FF] transition-colors mobile-link">Diensten</a>
    <a href="#cases" class="text-3xl text-white font-bold hover:text-[#29D9FF] transition-colors mobile-link">Cases</a>
    <a href="#contact-form" class="text-3xl text-white font-bold hover:text-[#29D9FF] transition-colors mobile-link">Contact</a>
  </nav>
</div>

<script>
  function setupHeader() {
      // Scroll Effect
      const handleScroll = () => {
          const header = document.getElementById('main-header');
          const container = header?.querySelector('.header-container');
          const logoContainer = header?.querySelector('.logo-container');
          
          if (window.scrollY > 50) {
            // Shrink state
            header?.classList.remove('w-[90%]', 'max-w-5xl', 'top-6');
            header?.classList.add('w-[60%]', 'max-w-3xl', 'top-4');
            
            container?.classList.remove('py-4', 'px-6');
            container?.classList.add('py-2', 'px-4');

            logoContainer?.classList.remove('w-10', 'h-10');
            logoContainer?.classList.add('w-8', 'h-8');
          } else {
            // Default state
            header?.classList.add('w-[90%]', 'max-w-5xl', 'top-6');
            header?.classList.remove('w-[60%]', 'max-w-3xl', 'top-4');
            
            container?.classList.add('py-4', 'px-6');
            container?.classList.remove('py-2', 'px-4');

            logoContainer?.classList.add('w-10', 'h-10');
            logoContainer?.classList.remove('w-8', 'h-8');
          }
      };

      window.addEventListener('scroll', handleScroll);
      handleScroll(); // Init on load

      // Mobile Menu Logic
      const menuBtn = document.getElementById('mobile-menu-btn');
      const closeBtn = document.getElementById('mobile-menu-close');
      const menuOverlay = document.getElementById('mobile-menu-overlay');
      const mobileLinks = document.querySelectorAll('.mobile-link');
      
      const openMenu = () => {
          menuOverlay?.classList.remove('translate-x-full');
          document.body.style.overflow = 'hidden';
      };

      const closeMenu = () => {
          menuOverlay?.classList.add('translate-x-full');
          document.body.style.overflow = '';
      };

      menuBtn?.addEventListener('click', openMenu);
      closeBtn?.addEventListener('click', closeMenu);

      // Close menu when a link is clicked
      mobileLinks.forEach(link => {
        link.addEventListener('click', closeMenu);
      });
  }

  // Initialize
  setupHeader();
  document.addEventListener('astro:page-load', setupHeader);
</script>
